#==============UserScript==============#
# @ConfigName Cornkernels配置1.0
#（仿鸿蒙操作，先套壳再剔除）
#套用了RuCu6
#     ddgks2013
#     fmz200
#     Orz-3
#     等多个大佬的开源文件

#-------------------------------------#
#   以 “;” 或 “#” 或 “//” 开头的行为注释行
#-------------------------------------#  @MainFunction      去开屏广告、应用净化、超级VIP、智能分流、自动优选、图标订阅、流媒体查询、Boxjs订阅、网易云解灰色Music、IOS更新屏蔽
# 更新日期：2024-3-19

# 本配置地址：

#-------------------------------------#


[general]
# 用于设置图标显示
profile_img_url=https://github.githubassets.com/images/modules/site/integrators/google.png
# > 用于Check节点ip地址
#显示节点名称
geo_location_checker=disabled

# 资源解析器
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js

#-----------------------------------#


[dns]
# 禁用系统 DNS（no-system） 以及 ipv6
no-system
no-ipv6
# 指定 dns 服务器，并发响应选取最优结果
server=223.5.5.5
server=119.29.29.29
server=114.114.114.114
# 指定域名解析DNS
server=/*.icloud.com/119.29.29.29
server=/*.icloud.com.cn/119.29.29.29
server=/*.tencent.com/119.29.29.29
server=/*.weixin.com/119.29.29.29

#-------------------------------------#


[policy]
static=全部节点, proxy, server-tag-regex=^((?!(bilbil|Cornkernels)).)*$, img-url=https://raw.githubusercontent.com/chxm1023/Script_X/main/icon/QX/Quantumult_X_1.png
static=直连模式, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Proxy.png
static=拦截模式, reject, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Reject.png

#app分流策略
static=网易云音乐, direct, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Netease_Music.png
static=bilbil, direct, 香港节点, 台湾节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/bilibili.png
static=Telegram, 香港节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram.png
static=Github, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, 全部节点, ,img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/GitHub.png
static=TikTok, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, 全部节点, img-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/tiktok.png
static=Emby, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, 全部节点, 直连模式, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Emby.png
static=Google, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, 全部节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google_Search.png
static=Spotify, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, 全部节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Spotify.png
static=Twitter, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, 全部节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Twitter.png
static=Netflix, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, 全部节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Netflix_Letter.png
static=Disney, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, 全部节点,, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Disney+.png
static=YouTube, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, 全部节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png
static=ChatGPT, 美国节点, 全部节点, img-url=https://raw.githubusercontent.com/chxm1023/Script_X/main/icon/ChatGPT/ChatGPT4.png
static=Instagram, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, 全部节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Instagram.png
static=Facebook, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, 全部节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Facebook.png
static=微软服务, 直连模式, 香港节点, 台湾节点, 日本节点, 韩国节点, 狮城节点, 美国节点, 全部节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png
static=苹果服务, 直连模式, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple.png
static=系统更新, 拦截模式, 直连模式, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple_Update.png


#默认设置15分钟测速一次，可自行修改check-interval=后面的数值（单位：秒），tolerance=后面的数值不建议修改

url-latency-benchmark=香港节点, server-tag-regex=(?=.*(港|HK|(?i)Hong))^((?!(台|日|韩|新|美)).)*$, check-interval=600, tolerance=0,alive-checking=false, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png
url-latency-benchmark=台湾节点, server-tag-regex=(?=.*(台|TW|(?i)Taiwan))^((?!(港|日|韩|新|美)).)*$, check-interval=600, tolerance=0,, alive-checking=false, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/China.png
url-latency-benchmark=日本节点, server-tag-regex=(?=.*(日|JP|(?i)Japan))^((?!(港|台|韩|新|美)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png
url-latency-benchmark=韩国节点, server-tag-regex=(?=.*(韩|KR|(?i)Korea|American))^((?!(港|台|日|新|美)).)*$, check-interval=900, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Korea.png
url-latency-benchmark=狮城节点, server-tag-regex=(?=.*(新|狮|獅|SG|(?i)Singapore))^((?!(港|台|日|韩|美)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png
url-latency-benchmark=美国节点, server-tag-regex=(?=.*(美|US|(?i)States|American))^((?!(港|台|日|韩|新)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png

#------------节点（Server）-------------#


# 本地节点
[server_local]




# 添加远程节点
[server_remote]
 



#------------分流（filter）-------------#

#分流可以分为本地规则(filter_local)和远程规则集⁠(filter_remote),远程规则集可以理解为数条单一分流规则的合集。
#本地>远程>final
            #分流规则的顺序
#修正规则
#去广告规则
#特殊/需要单独分流的规则（比如OpenAl，被包含在大分流规则里面的，往上放）
#国外必须代理
#国外建议代理的
#局域网规则
#国内规则
#FINAL
# 本地分流规则(相同规则下，本地规则将覆盖远程规则，优先生效)
[filter_local]
# > 一些比较容易忽视的分流
final, 全部节点



#-------------------------------------#
# 远程分流规则订阅，部分规则有先后顺序要求，调整顺序可能失效，将网络请求进行分流，网络请求的走向由匹配到的策略组决定
[filter_remote]

#修正规则
https://raw.githubusercontent.com/Repcz/Tool/X/QuantumultX/Rules/ChinaDomain.list, tag=国内域名规则, force-policy=direct, update-interval=172800, opt-parser=false, enabled=true
#去广告规则
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rules/MyBlockAds.list, tag=MyBlockAds, force-policy=reject, update-interval=172800, opt-parser=false, inserted-resource=true, enabled=true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rules/PornAds.list, tag=PornAds, force-policy=reject, update-interval=172800, opt-parser=false, inserted-resource=true, enabled=true

#单独分流的规则
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Microsoft/Microsoft.list, tag=Microsoft, force-policy=微软服务, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list, tag=Apple服务, force-policy=苹果服务, update-interval=86400, opt-parser=true, enabled=true

https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Speedtest/Speedtest.list, tag=Speedtest测速, force-policy=全部节点, update-interval=172800, opt-parser=true, enabled=false
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Emby/Emby.list, tag=Emby, force-policy=Emby, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/TikTok/TikTok.list, tag=TikTok, force-policy=TikTok, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/GitHub/GitHub.list, tag=Github, force-policy=Github, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/YouTube/YouTube.list, tag=YouTube, force-policy=YouTube, update-interval=172800, opt-parser=false, enabled=false
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/YouTubeMusic/YouTubeMusic.list, tag=YouTube Music, force-policy=YouTube, update-interval=172800, opt-parser=false, enabled=false
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Google/Google.list, tag=Google, force-policy=Google, update-interval=172800, opt-parser=true, enabled=false
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Spotify/Spotify.list, tag=Spotify, force-policy=Spotify, update-interval=172800, opt-parser=true, enabled=false
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Twitter/Twitter.list, tag=Twitter, force-policy=Twitter, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Netflix/Netflix.list, tag=Netflix, force-policy=Netflix, update-interval=172800, opt-parser=true, enabled=false
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Disney/Disney.list, tag=Disney, force-policy=Disney, update-interval=172800, opt-parser=true, enabled=false
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/OpenAI/OpenAI.list, tag=ChatGPT, force-policy=ChatGPT, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Telegram/Telegram.list, tag=Telegram, force-policy=Telegram, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Instagram/Instagram.list, tag=Instagram, force-policy=Instagram, update-interval=172800, opt-parser=true, enabled=false
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Facebook/Facebook.list, tag=Facebook, force-policy=Facebook, update-interval=172800, opt-parser=true, enabled=false
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/NetEaseMusic/NetEaseMusic.list, tag=网易云音乐, force-policy=网易云音乐, update-interval=172800, opt-parser=true, enabled=true

https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/BiliBili/BiliBili.list, tag=哔哩哔哩, force-policy=bilbil, update-interval=172800, opt-parser=true, enabled=true
#国外代理

https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Global/Global.list, tag=全球加速, force-policy=全部节点, update-interval=86400, opt-parser=true, enabled=true
#国内规则
https://raw.githubusercontent.com/Repcz/Open-Proflies/main/QuantumultX/Rules/FILTER_REGION.snippet, tag=CN, force-policy=direct, update-interval=-1, opt-parser=false, enabled=true



#-------------------------------------#
# 本地重写规则
[rewrite_local]



#-------------------------------------#
# 远程重写
[rewrite_remote]


# 广告净化
https://github.com/BiliUniverse/ADBlock/raw/main/modules/BiliBili.ADBlock.snippet, tag=📺 BiliBili: ⚙️ Enhanced, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/WebPage.conf, tag=WebPage, update-interval=172800, opt-parser=false, inserted-resource=true, enabled=true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/Cube/bilibili.snippet, tag=bilibili, update-interval=172800, opt-parser=false, inserted-resource=true, enabled=true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/Cube/cloudmusic.snippet, tag=cloudmusic, update-interval=172800, opt-parser=true, inserted-resource=true, enabled=true
https://raw.githubusercontent.com/RuCu6/QuanX/main/Rewrites/MyBlockAds.conf, tag=MyBlockAds, update-interval=172800, opt-parser=false, inserted-resource=true, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/Amap.conf, tag=高德地图-AD净化, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/fmz200/wool_scripts/main/QuantumultX/rewrite/chongxie.txt, tag=去广告合集, update-interval=172800, opt-parser=true, enabled=true
https://github.com/fmz200/wool_scripts/raw/main/QuantumultX/rewrite/cleanup.snippet, tag=app&小程序净化合集, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/zmqcherish/proxy-script/main/weibo.conf, tag=微博去广告, update-interval=172800, opt-parser=true, enabled=false
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/General.conf, tag=神机重定向, update-interval=604800, opt-parser=true, enabled=true


# app解锁
https://raw.githubusercontent.com/chxm1023/Script_X/main/Collections.conf, tag=App解锁合集, update-interval=172800, opt-parser=false, enabled=false
#https://github.com/ddgksf2013/Rewrite/raw/master/UnlockVip/Spotify.conf, tag=Spotify音乐VIP[音质≤高]@app2smile, update-interval=86400, opt-parser=false, enabled=true

# Cookie
https://raw.githubusercontent.com/fmz200/wool_scripts/main/QuantumultX/rewrite/cookies.snippet, tag=Cookie合集, update-interval=172800, opt-parser=true, enabled=false

# 功能扩展
https://raw.githubusercontent.com/ClydeTime/BiliBili/main/modules/BiliBiliDailyBonus.snippet, tag=bilbil每日等级任务, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/Orz-3/QuantumultX/master/Bili_Auto_Regions.conf, tag=Bilibili-换区脚本, update-interval=172800, opt-parser=true, enabled=false
https://raw.githubusercontent.com/BiliUniverse/Enhanced/main/modules/BiliBili.Enhanced.snippet, tag=BiliBili-Enhanced, update-interval=172800, opt-parser=true, enabled=false
https://raw.githubusercontent.com/zZPiglet/Task/master/UnblockURLinWeChat.conf, tag=解除微信链接限制, update-interval=172800, opt-parser=false, inserted-resource=true, enabled=true
https://raw.githubusercontent.com/NobyDa/Script/master/TestFlight/TestFlightAccount.js, tag=TestFlight账户管理, update-interval=-1, opt-parser=true, enabled=true

# 网页优化
https://raw.githubusercontent.com/chxm1023/Rewrite/main/Q-Search.conf, tag=Safari超级搜索, update-interval=604800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/chxm1023/Advertising/main/WebAdBlock.conf, tag=影视网站去广告, update-interval=604800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/chxm1023/Rewrite/main/spjx.conf, tag=视频解析, update-interval=172800, opt-parser=true, enabled=false


# 添加Boxjs，Sub-Store支持
# boxjs
https://github.com/chavyleung/scripts/raw/master/box/rewrite/boxjs.rewrite.quanx.conf, tag=boxjs, update-interval=172800, opt-parser=false, enabled=true
# 备用Sub-Store
https://raw.githubusercontents.com/Peng-YM/Sub-Store/master/config/QX.snippet, tag=Sub Store, update-interval=172800, opt-parser=false, enabled=false



#-------------------------------------#
# 脚本配置
[task_local]
0 30 7 * * ? https://raw.githubusercontent.com/ClydeTime/Quantumult/main/Script/Task/BiliBili.js, tag=bilbil每日等级任务, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/bilibili.png, enabled=true
0 */6 * * ? https://raw.githubusercontent.com/chxm1023/Task/main/dns-clear-cache.js, tag=清理Dns缓存, img-url=https://raw.githubusercontent.com/chxm1023/Task/main/icon/clean.png, enabled=true
0 30 7 * * ? https://raw.githubusercontent.com/chxm1023/Task/main/hljk.js, tag=汇率监控, img-url=https://raw.githubusercontent.com/chxm1023/Task/main/icon/hljk.png, enabled=true


# Boxjs备份还原
5 10 * * * https://raw.githubusercontent.com/dompling/Script/master/gist/restore.js, tag=Gist恢复, img-url=https://raw.githubusercontent.com/chxm1023/Task/main/icon/box.png, enabled=false
0 10 * * * https://raw.githubusercontent.com/dompling/Script/master/gist/backup.js, tag=Gist备份, img-url=https://raw.githubusercontent.com/chxm1023/Task/main/icon/box.png, enabled=false


# 流媒体解锁查询
event-interaction https://raw.githubusercontent.com/getsomecat/Qx/main/Net_Speed.js, tag=⚡️ Net Speed, img-url=bolt.square.fill.system, enabled=true
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=流媒体-解锁查询, img-url=checkmark.seal.system, enabled=true

# 脚本仓库
# 流媒体Task订阅
; https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/UI-Action.json
# 奇心
; https://ghproxy.com/https://raw.githubusercontent.com/shufflewzc/faker/main/qx.json
# Peng-YM
; https://raw.githubusercontent.com/Peng-YM/QuanX/master/Tasks/task.json
; https://gist.githubusercontent.com/Peng-YM/cc2cd6205b305d36544a44ec77129832/raw/gallery.json
# ydj0602
; https://gitee.com/ydj0602/hym/raw/master/Ease1.json
# ChuheGit
; https://dove.589669.xyz/task2qxgallery?sub=https://raw.githubusercontent.com/ChuheGit/1/main/Surge/Module/Task.sgmodule&img=1
# HotKids
; https://raw.githubusercontent.com/HotKids/Rules/master/Quantumult/X/TaskGallery.json
# HuiDoY
; https://raw.githubusercontent.com/HuiDoY/QX_Task/main/H.json
# Tartarus2014
; https://raw.githubusercontent.com/Tartarus2014/QuantumultX-Script/main/Task.json
# KOP-XIAO
; https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/UI-Action.json



#-------------------------------------#
[http_backend]



#-------------------------------------#
[mitm]
# 跳过证书验证
skip_validating_cert = true

# 添加主机名
hostname =

#-------------------------------------#